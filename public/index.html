<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Climate Closet</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
  <script src="javascripts/index.js" ></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
<body>
  <header>
    <h1>Welcome to Climate Closet!</h1>
    <h2 id="desc">Your personal assistant to picking clothing that suits the current weather!</h2>
  </header>
  <section id="background">
    <h3>Small bit of background...</h3>
    <p>Seattle can be a bit unique when it comes to the weather you may encounter on a day to day basis.</p>
    <p>What will today's weather look like? Will it rain? Should I bring a jacket?</p>
    <p>Cimate Closet is the assistive tool to help recommend what clothes would be suitable for today's weather!</p>
  </section>
  <section id="weatherInfo">
    <h3>Aspects of the weather</h3>
    <p>
      Weather.com is usually a common source for people to get the current, day, or week's forecast.
      However, the data presented on both this site and the majority of weather apps are not that user friendly.
      Here are some common misconceptions of the weather that people tend to misunderstand:
    </p>
    <h4>Percentage of rain</h4>
    <p>
      You may often see a percentage sign indicating the possibility of rain. Many people believe
      that it is the likelihood that the area will experience rain. <strong>However</strong>,
      that is not the case. The percentage is actually an indicator of the total area that may experience rain.
    </p>
    <p>Example: at 4 pm later today there is a percentage of 35.</p>
    <p>Incorrect: There is a 35% chance of rain</p>
    <p><strong>Correct</strong>: at 4 pm, 35% of Seattle will experience rain</p>
    <p>The percentage does not reflect the amount of rain or the likelihood you'd be experiencing it.</p>
  </section>
  <form id="uploadForm" enctype="multipart/form-data">
    <input type="file" name="image" required />
    <select name="tag" required>
      <option value="hot">Hot</option>
      <option value="warm">Warm</option>
      <option value="cool">Cool</option>
      <option value="cold">Cold</option>
    </select>
    <button type="submit">Upload</button>
  </form>

  <h2>Retrieve Images by Tag</h2>
  <select id="tagSelect">
    <option value="hot">Hot</option>
    <option value="warm">Warm</option>
    <option value="cool">Cool</option>
    <option value="cold">Cold</option>
  </select>
  <button onclick="fetchImages()">Get Images</button>

  <div id="imageContainer"></div>

  <button onclick="getWeather()">Click to get the current weather for Seattle!</button>
  <div id="results"></div>

  <script>
    document.getElementById('uploadForm').addEventListener('submit', async function(event) {
            event.preventDefault();
            const formData = new FormData(this);
            const response = await fetch('/upload', {
                method: 'POST',
                body: formData
            });
            const result = await response.json();
            console.log(result);
            alert('Image uploaded successfully!');
            this.reset();
        });

        async function fetchImages() {
            const tag = document.getElementById('tagSelect').value;
            const response = await fetch(`/images?tag=${tag}`);
            const images = await response.json();
            const imageContainer = document.getElementById('imageContainer');
            imageContainer.innerHTML = '';
            images.forEach(image => {
                const img = document.createElement('img');
                img.src = `/uploads/${image.filename}`;
                img.alt = image.tag;
                img.style.width = '100px';
                imageContainer.appendChild(img);
            });
        }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>
</html>
